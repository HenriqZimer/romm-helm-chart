# Production Example Configuration
# Copy this file to my-values.yaml and customize for your environment

# Enable all production features
romm:
  replicaCount: 2
  
  image:
    pullPolicy: IfNotPresent
  
  # Production resource limits
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  
  # Production-grade ingress configuration
  ingress:
    enabled: true
    className: "nginx"
    annotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-body-size: "500m"
    hosts:
      - host: romm.yourdomain.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: romm-tls
        hosts:
          - romm.yourdomain.com

  # Horizontal Pod Autoscaler
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  # Persistent storage for ROMs
  persistence:
    library:
      enabled: true
      storageClass: "nfs-client"  # or your storage class
      size: 500Gi
      accessMode: ReadWriteMany
    resources:
      enabled: true
      storageClass: "nfs-client"
      size: 50Gi
      accessMode: ReadWriteMany
    config:
      enabled: true
      storageClass: "nfs-client"
      size: 1Gi
      accessMode: ReadWriteMany

# MariaDB configuration
mariadb:
  enabled: true
  
  auth:
    rootPassword: "CHANGE_ME_ROOT_PASSWORD"
    database: "romm"
    username: "romm"
    password: "CHANGE_ME_DB_PASSWORD"
  
  primary:
    persistence:
      enabled: true
      storageClass: "your-storage-class"
      size: 20Gi
    
    resources:
      limits:
        cpu: 500m
        memory: 1Gi
      requests:
        cpu: 250m
        memory: 512Mi

# Secrets configuration
secrets:
  enabled: true
  data:
    # Database
    DB_HOST: "romm-mariadb"
    DB_PORT: "3306"
    DB_USER: "romm"
    DB_PASSWD: "CHANGE_ME_DB_PASSWORD"
    DB_NAME: "romm"
    
    # RomM Authentication
    ROMM_AUTH_SECRET_KEY: "CHANGE_ME_32_CHAR_SECRET_KEY_HERE"
    
    # IGDB (for metadata scraping)
    # Get credentials from: https://api.igdb.com/
    IGDB_CLIENT_ID: "your_igdb_client_id"
    IGDB_CLIENT_SECRET: "your_igdb_client_secret"
    
    # SteamGridDB (for artwork)
    # Get API key from: https://www.steamgriddb.com/profile/preferences/api
    STEAMGRIDDB_API_KEY: "your_steamgriddb_api_key"

# ConfigMap for non-sensitive configuration
configMap:
  enabled: true
  data:
    # Timezone
    TZ: "America/Sao_Paulo"
    
    # Application settings
    ROMM_HOST: "0.0.0.0"
    ROMM_PORT: "8080"
    
    # Optional: Enable debug mode (not recommended for production)
    # ROMM_DEBUG: "true"
